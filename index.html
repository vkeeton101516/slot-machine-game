<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devoted Deals Slots</title>
    <style>
        /* Your existing CSS code */
    </style>
</head>
<body>

    <!-- Your HTML structure here -->

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
        emailjs.init("YOUR_USER_ID"); // Replace with your EmailJS User ID

        const slotImages = [
            "https://iili.io/2m5cdSp.jpg",  // $5 Gift Card
            "https://iili.io/2m5ccib.jpg",  // $10 Gift Card
            "https://iili.io/2m5lFrx.jpg"   // $50 Gift Card
        ];

        let spinCount = localStorage.getItem("spinCount") ? parseInt(localStorage.getItem("spinCount")) : 0;
        const maxSpins = 3;

        function getRandomImage() {
            return slotImages[Math.floor(Math.random() * slotImages.length)];
        }

        function spin() {
            if (spinCount >= maxSpins) {
                document.getElementById('warning').textContent = "You have reached the daily spin limit!";
                return;
            }

            let slot1 = document.getElementById('slot1');
            let slot2 = document.getElementById('slot2');
            let slot3 = document.getElementById('slot3');

            // Spin effect
            slot1.innerHTML = '<img src="' + getRandomImage() + '" alt="Slot Image">';
            slot2.innerHTML = '<img src="' + getRandomImage() + '" alt="Slot Image">';
            slot3.innerHTML = '<img src="' + getRandomImage() + '" alt="Slot Image">';

            // Add spin animation classes
            setTimeout(() => {
                checkResult();
            }, 1000); // Wait for 1 second before checking result

            spinCount++;
            localStorage.setItem("spinCount", spinCount); // Store updated spin count
        }

        function checkResult() {
            let slot1 = document.getElementById('slot1').querySelector('img').src;
            let slot2 = document.getElementById('slot2').querySelector('img').src;
            let slot3 = document.getElementById('slot3').querySelector('img').src;

            if (slot1 === slot2 && slot2 === slot3) {
                let confirmationNumber = generateConfirmationNumber();
                let prize = slot1.includes('2m5cdSp') ? "5" : slot1.includes('2m5ccib') ? "10" : "50";
                
                document.getElementById('result').innerHTML = "You Win! Confirmation Number: " + confirmationNumber;

                sendEmail(confirmationNumber, prize); // Send the email to you with the details
            } else {
                document.getElementById('result').innerHTML = "Try Again!";
            }
        }

        function generateConfirmationNumber() {
            return Math.floor(Math.random() * 1000000);  // Random confirmation number between 0 and 999999
        }

        function sendEmail(confirmationNumber, prize) {
            // Replace 'YOUR_TEMPLATE_ID' with your EmailJS Template ID
            const templateParams = {
                confirmation_number: confirmationNumber,
                prize: prize
            };

            emailjs.send("YOUR_SERVICE_ID", "template_yru4mx7", templateParams)  // Use your actual service ID here
                .then(function(response) {
                    console.log("Email sent successfully!", response);
                }, function(error) {
                    console.log("Error sending email:", error);
                });
        }
    </script>

</body>
</html>
